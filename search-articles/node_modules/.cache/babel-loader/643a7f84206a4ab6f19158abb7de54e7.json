{"ast":null,"code":"var _jsxFileName = \"C:\\\\work-code\\\\mern-again\\\\search-articles\\\\src\\\\routers\\\\AppRouter.js\";\nimport React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Header from \"../components/Header\";\nimport Articles from \"../components/Articles\";\nimport Titles from \"../components/Titles\";\nimport Words from \"../components/Words\";\nimport NotFound from \"../components/NotFound\";\nimport { SearchContext } from \"../context/searchContext\";\nimport moment from \"moment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AppRouter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchword: \"\",\n      language: \"\",\n      from: \"\",\n      to: \"\",\n      articlesFromGNews: [],\n      searchWordsFromDB: []\n    }; //this.handleSearch = this.handleSearch.bind(this);\n  }\n\n  componentDidMount() {\n    // get articles from gNews, 24h old\n    const time = moment().subtract(2, \"days\").toISOString().split(\".\")[0] + \"Z\";\n    fetch(`https://gnews.io/api/v4/search?q=news&in=content&lang=en&from=${time}&max=9&token=8dbeb974cde3adbf5fbdb91d32ed9f61`).then(function (response) {\n      return response.json();\n    }).then(data => {\n      this.setState({\n        articlesFromGNews: data.articles\n      });\n    }); // get from mongoDB searchwords arr\n\n    axios.get(\"http://localhost:5000/searchwords\").then(response => {\n      const tempArr = [];\n      response.data.map(object => tempArr.push(object.searchword));\n      this.setState({\n        searchWordsFromDB: tempArr\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  handleSearch(searchword, language, from, to) {\n    console.log(this.state.articlesFromGNews);\n    console.log(\"searchword\", searchword);\n    console.log(\"language\", language);\n    console.log(\"from\", from);\n    console.log(\"to\", to);\n    this.setState({\n      searchword: searchword,\n      language: language,\n      from: from,\n      to: to\n    }); // send search word to mongoDB\n\n    const word = {\n      searchword: this.state.searchword\n    };\n    axios.post(\"http://localhost:5000/searchwords/add\", word).then(response => console.log(response.data)); // get gNews articles by searchword\n    // const searchGN = this.state.searchword || \"news\";\n    // const langGN = this.state.language || \"en\";\n    // const fromGN = this.state.from || moment().subtract(2, \"days\");\n    // const toGN = this.state.to || moment();\n\n    fetch(`https://gnews.io/api/v4/search?q=${searchword}&in=content&lang=${language}&from=${from}&to=${to}&max=9&token=8dbeb974cde3adbf5fbdb91d32ed9f61`).then(function (response) {\n      return response.json();\n    }).then(data => {\n      this.setState({\n        articlesFromGNews: data.articles\n      });\n    });\n    console.log(this.state.articlesFromGNews);\n  }\n\n  render() {\n    const searchContextValue = {\n      handleSearch: this.handleSearch,\n      articlesFromGNews: this.state.articlesFromGNews,\n      searchWordsFromDB: this.state.searchWordsFromDB\n    };\n    return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(SearchContext.Provider, {\n        value: searchContextValue,\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            component: Articles,\n            exact: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/titles\",\n            component: Titles\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/words\",\n            component: Words\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            component: NotFound\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default AppRouter;","map":{"version":3,"sources":["C:/work-code/mern-again/search-articles/src/routers/AppRouter.js"],"names":["React","BrowserRouter","Route","Switch","axios","Header","Articles","Titles","Words","NotFound","SearchContext","moment","AppRouter","Component","constructor","props","state","searchword","language","from","to","articlesFromGNews","searchWordsFromDB","componentDidMount","time","subtract","toISOString","split","fetch","then","response","json","data","setState","articles","get","tempArr","map","object","push","catch","err","console","log","handleSearch","word","post","render","searchContextValue"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Header from \"../components/Header\";\r\nimport Articles from \"../components/Articles\";\r\nimport Titles from \"../components/Titles\";\r\nimport Words from \"../components/Words\";\r\nimport NotFound from \"../components/NotFound\";\r\nimport { SearchContext } from \"../context/searchContext\";\r\nimport moment from \"moment\";\r\n\r\nclass AppRouter extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchword: \"\",\r\n      language: \"\",\r\n      from: \"\",\r\n      to: \"\",\r\n      articlesFromGNews: [],\r\n      searchWordsFromDB: [],\r\n    };\r\n\r\n    //this.handleSearch = this.handleSearch.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // get articles from gNews, 24h old\r\n    const time = moment().subtract(2, \"days\").toISOString().split(\".\")[0] + \"Z\";\r\n    fetch(\r\n      `https://gnews.io/api/v4/search?q=news&in=content&lang=en&from=${time}&max=9&token=8dbeb974cde3adbf5fbdb91d32ed9f61`\r\n    )\r\n      .then(function (response) {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ articlesFromGNews: data.articles });\r\n      });\r\n\r\n    // get from mongoDB searchwords arr\r\n    axios\r\n      .get(\"http://localhost:5000/searchwords\")\r\n      .then((response) => {\r\n        const tempArr = [];\r\n        response.data.map((object) => tempArr.push(object.searchword));\r\n        this.setState({ searchWordsFromDB: tempArr });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  handleSearch(searchword, language, from, to) {\r\n    console.log(this.state.articlesFromGNews);\r\n    console.log(\"searchword\", searchword);\r\n    console.log(\"language\", language);\r\n    console.log(\"from\", from);\r\n    console.log(\"to\", to);\r\n    this.setState({\r\n      searchword: searchword,\r\n      language: language,\r\n      from: from,\r\n      to: to,\r\n    });\r\n\r\n    // send search word to mongoDB\r\n    const word = {\r\n      searchword: this.state.searchword,\r\n    };\r\n    axios\r\n      .post(\"http://localhost:5000/searchwords/add\", word)\r\n      .then((response) => console.log(response.data));\r\n\r\n    // get gNews articles by searchword\r\n    // const searchGN = this.state.searchword || \"news\";\r\n    // const langGN = this.state.language || \"en\";\r\n    // const fromGN = this.state.from || moment().subtract(2, \"days\");\r\n    // const toGN = this.state.to || moment();\r\n\r\n    fetch(\r\n      `https://gnews.io/api/v4/search?q=${searchword}&in=content&lang=${language}&from=${from}&to=${to}&max=9&token=8dbeb974cde3adbf5fbdb91d32ed9f61`\r\n    )\r\n      .then(function (response) {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ articlesFromGNews: data.articles });\r\n      });\r\n    console.log(this.state.articlesFromGNews);\r\n  }\r\n\r\n  render() {\r\n    const searchContextValue = {\r\n      handleSearch: this.handleSearch,\r\n      articlesFromGNews: this.state.articlesFromGNews,\r\n      searchWordsFromDB: this.state.searchWordsFromDB,\r\n    };\r\n\r\n    return (\r\n      <BrowserRouter>\r\n        <SearchContext.Provider value={searchContextValue}>\r\n          <Header />\r\n          <Switch>\r\n            <Route path=\"/\" component={Articles} exact={true} />\r\n            <Route path=\"/titles\" component={Titles} />\r\n            <Route path=\"/words\" component={Words} />\r\n            <Route component={NotFound} />\r\n          </Switch>\r\n        </SearchContext.Provider>\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppRouter;\r\n"]},"metadata":{},"sourceType":"module"}